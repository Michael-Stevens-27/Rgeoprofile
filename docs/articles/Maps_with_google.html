<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creating maps with google • Rgeoprofile*</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Creating maps with google">
<meta property="og:description" content="RgeoProfile">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rgeoprofile*</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    R basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Install_R.html">Installing R and Rstudio</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/R_intro1.html">Introduction to R - part 1</a>
    </li>
    <li>
      <a href="../articles/R_intro2.html">Introduction to R - part 2</a>
    </li>
    <li>
      <a href="../articles/R_intro3.html">Introduction to R - part 3</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/R_exercises.html">R exercises</a>
    </li>
    <li>
      <a href="../articles/R_solutions.html">Exercise solutions</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    GP tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Installing_RGP.html">Installing RgeoProfile</a>
    </li>
    <li>
      <a href="../articles/GP_background.html">Background</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/Basic_Rgeoprofile.html">Basic Rgeoprofile example 1</a>
    </li>
    <li>
      <a href="../articles/Data_Rgeoprofile.html">Basic Rgeoprofile example 2</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/Advanced_Rgeoprofile.html">Advanced Rgeoprofile</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extra resources
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/General_R.html">Help with R</a>
    </li>
    <li class="divider">
    <li>
      <a href="../reference/index.html">RgeoProfile function list</a>
    </li>
    <li>
      <a href="../articles/GP_resources.html">Geoprofiling resources</a>
    </li>
    <li>
      <a href="../articles/Maps_with_google.html">Maps with Google</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Michael-Stevens-27/Rgeoprofile/tree/workshop">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><link href="Maps_with_google_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="Maps_with_google_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Creating maps with google</h1>
                        <h4 class="author">Michael Stevens</h4>
            
            <h4 class="date">2021-06-03</h4>
      
      
      <div class="hidden name"><code>Maps_with_google.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The Rgeoprofile package offers a neat way of visualising a geoprofile using interactive maps via the leaflet package. A disadvantage to using this method is that leaflet's maps are hard to extract as high quality images. The Rgeoprofile package contains another method of plotting geoprofiles via google maps and the <code>ggmap</code> package. Through this package and the <code>ggplotmap()</code> function from Rgeoprofile we can create higher quality maps such as the one below.</p>
<p>  <img src="https://github.com/Michael-Stevens-27/Rgeoprofile/raw/workshop/docs/articles/images/LondonExample_figure1.png">  </p>
<!-- ```{r, echo = F, out.width="400px"}
download.file(url = "https://github.com/Michael-Stevens-27/Rgeoprofile/raw/workshop/docs/articles/images/LondonExample_figure1.png",
          destfile = "image.png",
          mode = 'wb')
knitr::include_graphics(path = "image.png")
``` -->
<p>In order to create a map such as this, you are required to make a google account and enter credit card details to obtain an API key. This API key is then used to pull the maps from google's servers. Although a user would need to create hundreds of thousands of maps to be charged any substantial amount of money for using google's services, we do not want to force users to create such an account in order to complete this workshop, hence we have stuck to producing interactive maps through <code>leaflet</code> in the tutorials. Should you want to create one of these maps, a step by step guide can be found below.</p>
</div>
<div id="obtaining-an-api-key" class="section level2">
<h2 class="hasAnchor">
<a href="#obtaining-an-api-key" class="anchor"></a>Obtaining an API key</h2>
<p>GoogleMaps changed the way they price API calls – see here (<a href="https://cloud.google.com/maps-platform/pricing/#details" class="uri">https://cloud.google.com/maps-platform/pricing/#details</a>). Under the new system there is a lower limit on API calls below which you won’t be charged, but annoyingly you still need to sign up for an API key otherwise it produces a 403 error.</p>
<p>Instructions on signing up for a GoogleMaps API key can be found here (<a href="https://developers.google.com/maps/documentation/javascript/get-api-key" class="uri">https://developers.google.com/maps/documentation/javascript/get-api-key</a>). Then – just to be extra sure that you will never be charged - you can limit your budget to something very low (like £1) by following these instructions (<a href="https://cloud.google.com/billing/docs/how-to/budgets?hl=en" class="uri">https://cloud.google.com/billing/docs/how-to/budgets?hl=en</a>). This way you can be sure you will only use the free API calls, and your account will cap before you start being charged any significant amount of money.</p>
<p>Once you have a key (which should look like a long string of letters and numbers) you need to register it in R as below, replacing 'xxxxxxx' with your key. Start by installing and loading the “ggmap” package. Note that this should be installed from GitHub since the CRAN version doesn’t currently include the function <code><a href="https://rdrr.io/pkg/ggmap/man/register_google.html">register_google()</a></code>. After loading the <code>ggmap</code> library, load RgeoProfile as normal. Once your key is registered mapping functions in RgeoProfile should work normally.</p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-lib/devtools">devtools</a></span><span class="op">)</span> <span class="co"># for the install_github function</span>
<span class="fu"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"dkahle/ggmap"</span><span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dkahle/ggmap">ggmap</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/register_google.html">register_google</a></span><span class="op">(</span>key <span class="op">=</span><span class="st">"xxxxxxxx"</span><span class="op">)</span></code></pre></div>
<p>More details can be found here: <a href="https://rdrr.io/github/fresques/ggmap/man/register_google.html" class="uri">https://rdrr.io/github/fresques/ggmap/man/register_google.html</a>.</p>
<p>We know this is inconvenient and makes it more difficult for users to work with our package. For this reason the next version of RgeoProfile is likely to switch to open source alternatives.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Bob Verity, Michael Stevens, Sally Faulkner, Steven Le Comber.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
